<mvc:View controllerName="admin.controller.SectionManagement"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core">

    <Page id="sectionPage" showHeader="false">
        <content>
            <VBox class="sapUiLargeMargin">
                <Link text="{i18n>backToCourseList}" press="onBackToCourseList"/>

                <Title text="{i18n>sectionQuotaMgmt}" level="H2" class="sapUiSmallMarginTop"/>
                <Text text="{= ${view>/courseTitle} ? ${i18n>managingSectionsFor} + ' ' + ${view>/courseTitle} : '' }"
                    class="sapUiTinyMarginBottom"/>

                <Toolbar class="sapUiSmallMarginTop sapUiSmallMarginBottom">
                    <ToolbarSpacer/>
                    <Button text="{i18n>addSection}" icon="sap-icon://add" type="Emphasized" press="onToggleAddForm"/>
                </Toolbar>

                <Panel id="addSectionPanel" visible="{view>/showAddForm}" backgroundDesign="Transparent">
                    <VBox class="sapUiSmallMargin">
                        <Title text="{i18n>addNewSection}" level="H4"/>

                        <HBox wrap="Wrap" renderType="Bare" class="sapUiSmallMarginTop">
                            <VBox class="sapUiTinyMarginEnd" width="22rem">
                                <Label text="{i18n>sectionId}" required="true"/>
                                <Input value="{view>/draft/sectionCode}" placeholder="e.g. A01"/>
                            </VBox>

                            <VBox class="sapUiTinyMarginEnd" width="22rem">
                                <Label text="{i18n>lecturer}" required="true"/>
                                <Select selectedKey="{view>/draft/lecturer_ID}" width="100%">
                                    <items>
                                        <core:Item key="" text="{i18n>selectLecturer}"/>
                                        <core:ListItem key="{view>ID}" text="{view>name}" />
                                    </items>
                                </Select>
                            </VBox>
                        </HBox>

                        <HBox wrap="Wrap" renderType="Bare" class="sapUiSmallMarginTop">
                            <VBox class="sapUiTinyMarginEnd" width="22rem">
                                <Label text="{i18n>day}" required="true"/>
                                <Select selectedKey="{view>/draft/dayOfWeek}" width="100%">
                                    <items>
                                        <core:Item key="" text="{i18n>selectDay}"/>
                                        <core:Item key="Monday" text="Monday"/>
                                        <core:Item key="Tuesday" text="Tuesday"/>
                                        <core:Item key="Wednesday" text="Wednesday"/>
                                        <core:Item key="Thursday" text="Thursday"/>
                                        <core:Item key="Friday" text="Friday"/>
                                        <core:Item key="Saturday" text="Saturday"/>
                                    </items>
                                </Select>
                            </VBox>

                            <VBox class="sapUiTinyMarginEnd" width="22rem">
                                <Label text="{i18n>time}" required="true"/>
                                <Input value="{view>/draft/timeRange}" placeholder="e.g. 08:00-10:00"/>
                            </VBox>
                        </HBox>

                        <HBox wrap="Wrap" renderType="Bare" class="sapUiSmallMarginTop">
                            <VBox class="sapUiTinyMarginEnd" width="22rem">
                                <Label text="{i18n>venue}" required="true"/>
                                <Select selectedKey="{view>/draft/venue_ID}" width="100%">
                                    <items>
                                        <core:Item key="" text="{i18n>selectVenue}"/>
                                        <core:ListItem key="{view>ID}" text="{view>name}" />
                                    </items>
                                </Select>
                            </VBox>

                            <VBox class="sapUiTinyMarginEnd" width="22rem">
                                <Label text="{i18n>capacity}" required="true"/>
                                <StepInput value="{view>/draft/studentQuota}" min="1" max="300"/>
                            </VBox>
                        </HBox>

                        <HBox class="sapUiSmallMarginTop">
                            <Button text="{i18n>save}" type="Emphasized" press="onSaveSection"/>
                            <Button text="{i18n>cancel}" class="sapUiTinyMarginBegin" press="onCancelAdd"/>
                        </HBox>
                    </VBox>
                </Panel>

                <Table id="sectionTable" items="{view>/sections}" noDataText="{i18n>noSections}">
                    <columns>
                        <Column><Text text="{i18n>sectionId}"/></Column>
                        <Column><Text text="{i18n>lecturer}"/></Column>
                        <Column><Text text="{i18n>day}"/></Column>
                        <Column><Text text="{i18n>time}"/></Column>
                        <Column><Text text="{i18n>venue}"/></Column>
                        <Column><Text text="{i18n>capacity}"/></Column>
                        <Column><Text text="{i18n>enrolled}"/></Column>
                        <Column hAlign="Center"><Text text="{i18n>actions}"/></Column>
                    </columns>
                    <items>
                        <ColumnListItem>
                            <cells>
                                <Text text="{path: 'sectionCode', formatter: '.formatSectionCode'}"/>
                                <Text text="{path: 'lecturer_ID', formatter: '.formatLecturer'}"/>
                                <Text text="{dayOfWeek}"/>
                                <Text text="{startTime} - {endTime}"/>
                                <Text text="{path: 'venue_ID', formatter: '.formatVenue'}"/>
                                <Text text="{studentQuota}"/>
                                <Text text="{enrolled}"/>
                                <HBox justifyContent="Center">
                                    <Button icon="sap-icon://delete" type="Transparent" press="onDeleteSection"/>
                                </HBox>
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>
            </VBox>
        </content>
    </Page>
</mvc:View>

